"use strict";(globalThis.webpackChunkkhoins=globalThis.webpackChunkkhoins||[]).push([[2290],{8453:(n,a,e)=>{e.d(a,{R:()=>l,x:()=>d});var s=e(6540);const i={},r=s.createContext(i);function l(n){const a=s.useContext(r);return s.useMemo(function(){return"function"==typeof n?n(a):{...a,...n}},[a,n])}function d(n){let a;return a=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:l(n.components),s.createElement(r.Provider,{value:a},n.children)}},8772:(n,a,e)=>{e.r(a),e.d(a,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>t});const s=JSON.parse('{"id":"Callback/intro","title":"Pengenalan Callback KHOINS","description":"Callback adalah mekanisme di mana server KHOINS mengirimkan laporan status final (Success atau Gagal) ke server Anda.","source":"@site/docs/Callback/intro.md","sourceDirName":"Callback","slug":"/Callback/intro","permalink":"/KHOINS-Documentation/docs/Callback/intro","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Callback/intro.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Create a Blog Post","permalink":"/KHOINS-Documentation/docs/member-api/create-a-blog-post"},"next":{"title":"Top-up Callback","permalink":"/KHOINS-Documentation/docs/Callback/topup-callback"}}');var i=e(4848),r=e(8453);const l={},d="Pengenalan Callback KHOINS",c={},t=[{value:"Apa Maksud &quot;Endpoint&quot; Callback?",id:"apa-maksud-endpoint-callback",level:3},{value:"Alur Kerja Callback",id:"alur-kerja-callback",level:3},{value:"Yang Harus Diperhatikan",id:"yang-harus-diperhatikan",level:3}];function o(n){const a={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.header,{children:(0,i.jsx)(a.h1,{id:"pengenalan-callback-khoins",children:"Pengenalan Callback KHOINS"})}),"\n",(0,i.jsxs)(a.p,{children:["Callback adalah mekanisme di mana server KHOINS mengirimkan laporan status ",(0,i.jsx)(a.strong,{children:"final"})," (",(0,i.jsx)(a.code,{children:"Success"})," atau ",(0,i.jsx)(a.code,{children:"Gagal"}),") ke server Anda."]}),"\n",(0,i.jsxs)(a.p,{children:["Ini adalah bagian ",(0,i.jsx)(a.strong,{children:"paling penting"})," untuk memproses:"]}),"\n",(0,i.jsxs)(a.ol,{children:["\n",(0,i.jsxs)(a.li,{children:["Semua transaksi ",(0,i.jsx)(a.strong,{children:"Asynchronous"}),"."]}),"\n",(0,i.jsxs)(a.li,{children:["Semua status ",(0,i.jsx)(a.strong,{children:"Top-up Saldo"}),"."]}),"\n"]}),"\n",(0,i.jsx)(a.hr,{}),"\n",(0,i.jsx)(a.h3,{id:"apa-maksud-endpoint-callback",children:'Apa Maksud "Endpoint" Callback?'}),"\n",(0,i.jsx)(a.p,{children:"Di dokumentasi KHOINS (dari Postman), Anda melihat endpoint seperti:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{children:"{{your_base_url}}/api/your-own-callback-report-handler\n"})}),"\n",(0,i.jsx)(a.admonition,{type:"danger",children:(0,i.jsxs)(a.p,{children:["Ini ",(0,i.jsx)(a.strong,{children:"BUKAN"})," endpoint yang Anda panggil. Ini adalah ",(0,i.jsx)(a.strong,{children:"CONTOH"}),' "alamat" atau ',(0,i.jsx)(a.strong,{children:"URL di server ANDA"})," yang harus Anda siapkan."]})}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.strong,{children:"Alurnya:"})}),"\n",(0,i.jsxs)(a.ol,{children:["\n",(0,i.jsxs)(a.li,{children:["Anda membuat sebuah endpoint (misal: ",(0,i.jsx)(a.code,{children:"https://api.reseller-anda.com/laporan/khoins"}),") di server Anda yang siap menerima ",(0,i.jsx)(a.code,{children:"POST"})," request."]}),"\n",(0,i.jsx)(a.li,{children:"Anda mendaftarkan URL tersebut ke KHOINS."}),"\n",(0,i.jsxs)(a.li,{children:["Setiap kali ada transaksi Prabayar atau Top-up yang selesai, server KHOINS akan mengirimkan ",(0,i.jsx)(a.code,{children:"POST"})," request (berisi JSON) ke URL tersebut."]}),"\n"]}),"\n",(0,i.jsx)(a.hr,{}),"\n",(0,i.jsx)(a.h3,{id:"alur-kerja-callback",children:"Alur Kerja Callback"}),"\n",(0,i.jsxs)(a.p,{children:["Seperti yang dijelaskan di ",(0,i.jsx)(a.a,{href:"/KHOINS-Documentation/docs/member-api/transaksi/intro",children:"Konsep Transaksi"}),", transaksi Prabayar bersifat ",(0,i.jsx)(a.em,{children:"Asynchronous"}),"."]}),"\n",(0,i.jsxs)(a.ol,{children:["\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.strong,{children:"Request Anda:"})," Anda memanggil ",(0,i.jsx)(a.code,{children:"GET /"})," dengan ",(0,i.jsx)(a.code,{children:"kodeproduk=TH10"})," dan ",(0,i.jsx)(a.code,{children:"trxid=abc-123"}),"."]}),"\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.strong,{children:"Respon Langsung:"})," Anda menerima ",(0,i.jsx)(a.code,{children:'{"status": "Pending", ...}'}),". Sistem Anda menandai ",(0,i.jsx)(a.code,{children:"abc-123"}),' sebagai "Pending".']}),"\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.strong,{children:"Proses KHOINS:"})," KHOINS memproses pulsa."]}),"\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.strong,{children:"Callback KHOINS:"})," 5 detik kemudian, KHOINS mengirim ",(0,i.jsx)(a.code,{children:"POST"})," ke URL Anda (",(0,i.jsx)(a.code,{children:"https://api.reseller-anda.com/laporan/khoins"}),")."]}),"\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.strong,{children:"Body Callback:"})," Isi ",(0,i.jsx)(a.code,{children:"POST"})," tersebut adalah JSON:","\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-json",children:'{\n  "refid": "abc-123",\n  "message": "{\\"status\\":\\"Success\\",\\"message\\":\\"R#abc-123... SUKSES. SN: 12345...\\"}"\n}\n'})}),"\n"]}),"\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.strong,{children:"Tugas Server Anda:"})," Server Anda menerima ini, membaca ",(0,i.jsx)(a.code,{children:"refid"}),", dan memperbarui status ",(0,i.jsx)(a.code,{children:"trxid"})," ",(0,i.jsx)(a.code,{children:"abc-123"}),' di database Anda menjadi "Success".']}),"\n"]}),"\n",(0,i.jsx)(a.hr,{}),"\n",(0,i.jsx)(a.h3,{id:"yang-harus-diperhatikan",children:"Yang Harus Diperhatikan"}),"\n",(0,i.jsx)(a.p,{children:"Berdasarkan koleksi Postman, Callback KHOINS memiliki struktur yang unik:"}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsxs)(a.li,{children:[(0,i.jsxs)(a.strong,{children:[(0,i.jsx)(a.code,{children:"refid"})," atau ",(0,i.jsx)(a.code,{children:"trxid"}),":"]})," Ini adalah ID unik transaksi Anda yang dikirim kembali. Gunakan ini untuk mencocokkan data di database Anda."]}),"\n",(0,i.jsxs)(a.li,{children:[(0,i.jsxs)(a.strong,{children:[(0,i.jsx)(a.code,{children:"message"}),":"]})," Ini adalah bagian yang paling ",(0,i.jsx)(a.em,{children:"tricky"}),". Field ",(0,i.jsx)(a.code,{children:"message"})," ",(0,i.jsx)(a.strong,{children:"berisi JSON lain di dalam String"}),"."]}),"\n"]}),"\n",(0,i.jsx)(a.p,{children:'Server Anda perlu melakukan "parse" dua kali:'}),"\n",(0,i.jsxs)(a.ol,{children:["\n",(0,i.jsxs)(a.li,{children:["Parse JSON utama untuk mendapatkan ",(0,i.jsx)(a.code,{children:"refid"})," dan ",(0,i.jsx)(a.code,{children:"message"}),"."]}),"\n",(0,i.jsxs)(a.li,{children:["Ambil nilai dari ",(0,i.jsx)(a.code,{children:"message"}),", lalu ",(0,i.jsx)(a.strong,{children:"parse lagi sebagai JSON"})," untuk mendapatkan status final (",(0,i.jsx)(a.code,{children:"Success"}),"/",(0,i.jsx)(a.code,{children:"Gagal"}),") dan pesan SN di dalamnya."]}),"\n"]})]})}function h(n={}){const{wrapper:a}={...(0,r.R)(),...n.components};return a?(0,i.jsx)(a,{...n,children:(0,i.jsx)(o,{...n})}):o(n)}}}]);